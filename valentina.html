<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¬°La Gran Aventura de Cumplea√±os de Ema Valentina!</title>
    <meta name="description" content="¬°Una misi√≥n te espera! Ayuda al capibara Valent√≠n a llegar a la fiesta de 5 a√±os de Ema Valentina. Domingo 6 de julio, 4:30 PM.">
    <link rel="canonical" href="https://elmejorequipo.github.io/invitacion/valentina">
    <meta property="og:title" content="¬°Aventura de Cumplea√±os de Ema Valentina!">
    <meta property="og:description" content="¬°Est√°s invitado a celebrar los 5 a√±os de Ema! Resuelve las pistas y acomp√°√±anos en la fiesta.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://elmejorequipo.github.io/invitacion/valentina">
    <meta property="og:image" content="https://raw.githubusercontent.com/elmejorequipo/invitacion/main/capibara01.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="¬°Aventura de Cumplea√±os de Ema Valentina!">
    <meta name="twitter:description" content="¬°Est√°s invitado a celebrar los 5 a√±os de Ema! Resuelve las pistas y acomp√°√±anos en la fiesta.">
    <meta name="twitter:image" content="https://raw.githubusercontent.com/elmejorequipo/invitacion/main/capibara01.png">

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SocialEvent",
      "name": "Fiesta de 5 a√±os de Ema Valentina",
      "startDate": "2025-07-06T16:30:00-04:00",
      "eventStatus": "https://schema.org/EventScheduled",
      "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
      "location": {
        "@type": "Place",
        "name": "Domicilio en B. Villa Warnes",
        "address": {
          "@type": "PostalAddress",
          "streetAddress": "C. Alberto Ostria N¬∞ 3445",
          "addressLocality": "Santa Cruz de la Sierra",
          "addressCountry": "BO"
        }
      },
      "image": [
        "https://raw.githubusercontent.com/elmejorequipo/invitacion/main/capibara01.png"
       ],
      "description": "Ven a celebrar el cumplea√±os n√∫mero 5 de Ema Valentina con juegos, pastel y una divertida aventura con tem√°tica de capibaras.",
      "organizer": {
        "@type": "Person",
        "name": "Ema Valentina"
      }
    }
    </script>
    
    <style>
        :root{--bg-gradient-start:#a8e6cf;--bg-gradient-end:#dcedc1;--card-bg:#ffffff;--primary-color:#ff8b94;--secondary-color:#63d471;--accent-color:#ffcc5c;--text-color:#5d4037;--input-bg:#f1f1f1; --popup-bg: #fffde7; --popup-border: #fbc02d;}
        body{font-family:'Fredoka One','Comic Sans MS',cursive;display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0;padding:20px;background:linear-gradient(45deg,var(--bg-gradient-start),var(--bg-gradient-end));background-size:400% 400%;animation:gradientBG 15s ease infinite;color:var(--text-color);box-sizing:border-box;overflow-x:hidden}
        @keyframes gradientBG{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
        main.invitacion{background:var(--card-bg);border:5px solid var(--primary-color);border-radius:30px;padding:25px 35px;max-width:500px;width:100%;text-align:center;box-shadow:0 15px 30px rgba(0,0,0,0.15);position:relative;overflow:hidden; animation:fadeInCard 1s .5s ease-out forwards; opacity: 0; visibility: hidden;}
        main.invitacion.visible{visibility: visible;}
        @keyframes fadeInCard{from{opacity:0;transform:scale(.9) translateY(20px)}to{opacity:1;transform:scale(1) translateY(0)}}
        .invitacion::before{content:'üçÉ';position:absolute;top:10px;left:10px;font-size:40px;animation:wiggle 4s ease-in-out infinite}.invitacion::after{content:'‚òÄÔ∏è';position:absolute;top:15px;right:15px;font-size:40px;color:var(--accent-color);animation:spin 10s linear infinite}
        @keyframes wiggle{0%,100%{transform:rotate(-5deg)}50%{transform:rotate(10deg)}}@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
        h1{color:var(--primary-color);font-size:2.2em;margin:0 0 10px 0;text-shadow:2px 2px #fff8f8}
        h2{font-size:2em;color:var(--text-color);margin:15px 0 10px;line-height:1.1}
        p{font-size:1.1em;line-height:1.5}
        strong{color:var(--primary-color)}
        
        .capibara-imagen{width:200px;height:200px;margin:20px auto 15px;background-size:contain;background-repeat:no-repeat;background-position:center;cursor:pointer;transition:transform .3s ease-in-out;animation:bobbing 3s ease-in-out infinite}
        @keyframes bobbing{0%,100%{transform:translateY(0)}50%{transform:translateY(-15px)}}
        .capibara-imagen:hover{transform:scale(1.1) rotate(3deg);animation-play-state:paused}
        
        .paso{transition:opacity .5s ease-out,transform .5s ease-out,max-height .8s ease-in-out;max-height:800px;opacity:1;transform:translateY(0);overflow:hidden}
        .paso.oculto{opacity:0;max-height:0;transform:translateY(20px);pointer-events:none}
        .pista{background-color:#fff9e6;color:var(--text-color);padding:15px;border-radius:15px;margin:20px 0;border:2px dashed var(--accent-color);font-size:1.1em;line-height:1.6}
        .opciones-container{display:flex;flex-direction:column;gap:10px;margin-top:15px}
        .boton-opcion,.boton-jugar{background:linear-gradient(45deg,var(--secondary-color),#81c784);color:white;padding:12px 20px;border:none;border-radius:50px;font-size:1.1em;cursor:pointer;transition:transform .2s,box-shadow .2s;box-shadow:0 4px 15px rgba(0,0,0,.1)}
        .boton-opcion:hover,.boton-jugar:hover{transform:scale(1.05);box-shadow:0 6px 20px rgba(0,0,0,.15)}
        .input-secreto{width:80%;padding:12px;border:2px solid #ddd;border-radius:10px;text-align:center;font-size:1.2em;margin-top:10px;background-color:var(--input-bg);color:var(--text-color)}.input-secreto:focus{outline:none;border-color:var(--accent-color)}
        #mensajeFinal{background-color:#e8f5e9;color:#388e3c;padding:20px;border-radius:15px;border:2px solid var(--secondary-color);font-size:1.2em;margin-top:20px}
        #music-toggle{position:fixed;bottom:15px;right:15px;width:50px;height:50px;background-color:rgba(255,255,255,0.8);border:2px solid var(--primary-color);border-radius:50%;font-size:24px;cursor:pointer;z-index:1000;display:flex;justify-content:center;align-items:center;opacity:0; transition: opacity 0.5s ease;}
        #music-toggle.visible{opacity:1;}
        #confetti-canvas{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999}
        .mapa-container{margin-top:20px;border-radius:15px;overflow:hidden;border:3px solid var(--accent-color)}
        .mapa-container iframe{width:100%;height:300px;border:0}
        
        .popup-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,0.6);z-index:1001;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:opacity .3s ease; visibility: hidden;}
        .popup-overlay.activo{opacity:1;pointer-events:auto; visibility: visible;}
        .popup-container{background-color:var(--popup-bg);border:4px solid var(--popup-border);border-radius:15px;padding:25px;text-align:center;box-shadow:0 8px 16px rgba(0,0,0,0.2);transform:scale(.9);transition:transform .3s ease}
        .popup-overlay.activo .popup-container{transform:scale(1)}
        .popup-message{color:var(--popup-text);font-size:1.2em;margin-bottom:20px;margin-top:10px;}
        .popup-button{background-color:var(--accent-color);color:#424242;border:none;border-radius:10px;padding:10px 25px;font-size:1em;cursor:pointer;font-weight:bold;transition:background-color .2s}.popup-button:hover{background-color:#ffd76e}
        
        #intro-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:var(--popup-bg);z-index:10000;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;transition:opacity 0.5s ease-out;color: var(--text-color);}
        #intro-overlay h2{font-size:2.5em;}
        #start-button{font-family: 'Fredoka One', cursive; font-size:1.5em; padding:15px 30px; border-radius:15px; border:none; background-color:var(--primary-color); color:white; cursor:pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.3); transition: transform 0.2s ease;}
        #start-button:hover{transform: scale(1.1);}

        @media (max-width:600px){h1{font-size:1.8em}h2{font-size:1.8em}p{font-size:1em}.capibara-imagen{width:150px;height:150px}.invitacion::before,.invitacion::after{font-size:30px}}
    </style>
</head>
<body>
    
    <div id="intro-overlay">
        <h2>¬°Una aventura te espera!</h2>
        <p>Presiona para comenzar</p>
        <button id="start-button">üéâ Comenzar üéâ</button>
    </div>
    
    <main class="invitacion">
        <div id="paso1" class="paso">
            <h1>Ema Valentina</h1>
            <p>¬°Te invito a celebrar mis <strong>5 A√ëOS</strong>!</p>
            <div class="capibara-imagen" id="capibara" role="img" aria-label="Ilustraci√≥n de un capibara" style="background-image: url('https://raw.githubusercontent.com/elmejorequipo/invitacion/main/capibara01.png');"></div>
            <p><strong>¬°Haz clic en Valent√≠n para ayudarlo a llegar!</strong></p>
        </div>

        <div id="paso2" class="paso oculto">
            <h2>Paso 1: ¬°Prepara la mochila!</h2>
            <p>Valent√≠n quiere verse genial para la fiesta. ¬øQu√© accesorio deber√≠a usar?</p>
            <div class="opciones-container">
                <button class="boton-opcion" onclick="revisarRespuesta('incorrecta')">Un libro de matem√°ticas</button>
                <button class="boton-opcion" onclick="revisarRespuesta('correcta')">Unos lentes de sol cool üï∂Ô∏è</button>
                <button class="boton-opcion" onclick="revisarRespuesta('incorrecta')">Una corbata de mo√±o</button>
            </div>
        </div>
        
        <div id="paso3" class="paso oculto">
            <h2>Paso 2: ¬°Lleg√≥ con estilo!</h2>
             <div class="capibara-imagen" style="background-image: url('https://raw.githubusercontent.com/elmejorequipo/invitacion/main/capibara02.png'); animation: none; cursor: default;"></div>
            <p>¬°Perfecto! Ahora, para encontrar la ubicaci√≥n, escribe el nombre de la cumplea√±era.</p>
            <input type="text" id="inputClave" class="input-secreto" placeholder="Nombre de la cumplea√±era...">
            <button class="boton-jugar" style="margin-top: 15px;" onclick="revisarClave()">Revelar Mapa</button>
        </div>

        <div id="paso4" class="paso oculto">
            <h2>¬°Misi√≥n Cumplida!</h2>
            <p>¬°Gracias a ti, Valent√≠n encontr√≥ el lugar de la fiesta!</p>
             <div class="pista">
                <strong>Fecha:</strong> Domingo 6 de Julio, 4:30 PM<br>
                <strong>Direcci√≥n:</strong> B. Villa Warnes | C. Alberto Ostria | N¬∞ 3445
            </div>
            <div class="mapa-container">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3799.414324393666!2d-63.155700024825316!3d-17.77180498319106!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x93f1e8093848b8b5%3A0x2a98f7311153a79a!2sC.%20Alberto%20Ostria%20Guti%C3%A9rrez%203445%2C%20Santa%20Cruz%20de%20la%20Sierra!5e0!3m2!1ses!2sbo!4v1719879796859!5m2!1ses!2sbo" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
            <div id="mensajeFinal">
                <p><strong>¬°Te esperamos para celebrar!</strong> üéâ</p>
            </div>
        </div>
    </main>

    <button id="music-toggle" class="oculto">üéµ</button>
    <audio id="background-music" loop>
        <source src="https://assets.mixkit.co/music/preview/mixkit-a-very-happy-christmas-897.mp3" type="audio/mpeg">
    </audio>
    <canvas id="confetti-canvas"></canvas>

    <div id="popup-overlay" class="popup-overlay oculto">
        <div class="popup-container">
            <p id="popup-message" class="popup-message"></p>
            <button id="popup-button" class="popup-button">Entendido</button>
        </div>
    </div>
    
    <script>
        // --- SELECCI√ìN DE ELEMENTOS ---
        const pasos = document.querySelectorAll('.paso');
        const capibara = document.getElementById('capibara');
        const popupOverlay = document.getElementById('popup-overlay');
        const popupMessage = document.getElementById('popup-message');
        const popupButton = document.getElementById('popup-button');
        const musicToggle = document.getElementById('music-toggle');
        const backgroundMusic = document.getElementById('background-music');
        const introOverlay = document.getElementById('intro-overlay');
        const startButton = document.getElementById('start-button');
        const invitationCard = document.querySelector('main.invitacion');
        backgroundMusic.volume = 0.3;

        let proximoPaso = 0;
        let isMusicPlaying = false; // Estado para controlar la m√∫sica

        // --- FUNCIONES DE NAVEGACI√ìN Y JUEGO ---
        function mostrarPaso(numeroPaso) {
            pasos.forEach((paso, index) => {
                paso.classList.toggle('oculto', index + 1 !== numeroPaso);
            });
        }
        
        startButton.addEventListener('click', () => {
            introOverlay.style.opacity = '0';
            setTimeout(() => {
                introOverlay.style.display = 'none';
            }, 500);
            
            invitationCard.style.visibility = 'visible';
            invitationCard.style.opacity = '1';

            // Intenta reproducir la m√∫sica
            backgroundMusic.play().then(() => {
                isMusicPlaying = true;
                musicToggle.textContent = 'üîá';
            }).catch(e => {
                console.log("El navegador bloque√≥ la reproducci√≥n autom√°tica. El usuario debe activar el sonido manualmente.");
                isMusicPlaying = false;
                musicToggle.textContent = 'üéµ';
            });

            musicToggle.classList.add('visible');
        });

        capibara.addEventListener('click', () => mostrarPaso(2));

        function revisarRespuesta(respuesta) {
            if (respuesta === 'correcta') {
                mostrarPopup('¬°Excelente elecci√≥n! Valent√≠n se ve genial. ¬°Vamos al siguiente paso!', 3);
            } else {
                mostrarPopup('Mmm... no creo que a Valent√≠n le guste eso. ¬°Intenta de nuevo!');
            }
        }
        
        function revisarClave() {
            const claveInput = document.getElementById('inputClave');
            if (claveInput.value.trim().toLowerCase() === 'ema') {
                mostrarPopup('¬°Correcto! ¬°Has desbloqueado la ubicaci√≥n secreta!', 4);
                startConfetti();
            } else {
                mostrarPopup('¬°Esa no es la palabra secreta! Pista: Es un nombre corto y bonito üòâ');
            }
        }

        // --- L√ìGICA DEL POPUP PERSONALIZADO ---
        function mostrarPopup(mensaje, pasoSiguiente = 0) {
            popupMessage.textContent = mensaje;
            popupOverlay.classList.remove('oculto');
            setTimeout(() => popupOverlay.classList.add('activo'), 10);
            proximoPaso = pasoSiguiente;
        }

        popupButton.addEventListener('click', () => {
            popupOverlay.classList.remove('activo');
             setTimeout(() => {
                if (proximoPaso > 0) {
                    mostrarPaso(proximoPaso);
                    proximoPaso = 0;
                }
            }, 300);
        });

        // --- CONTROL DE M√öSICA (L√ìGICA CORREGIDA) ---
        musicToggle.addEventListener('click', () => {
            if (isMusicPlaying) {
                backgroundMusic.pause();
                musicToggle.textContent = 'üéµ';
            } else {
                backgroundMusic.play();
                musicToggle.textContent = 'üîá';
            }
            isMusicPlaying = !isMusicPlaying; // Invierte el estado
        });

        // --- SCRIPT DE CONFETI ---
        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        let confettiInterval = null;
        const confettiParticles = [];
        const colors = ["#ff8b94", "#63d471", "#ffcc5c", "#a8e6cf", "#ffffff"];

        function startConfetti() {
            if (confettiInterval) return;
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            for (let i = 0; i < 200; i++) { confettiParticles.push(createConfetti()); }
            confettiInterval = setInterval(drawConfetti, 1000 / 60);
        }

        function createConfetti() {
            return {
                x: Math.random() * canvas.width,
                y: Math.random() * -canvas.height,
                size: Math.random() * 8 + 4,
                color: colors[Math.floor(Math.random() * colors.length)],
                speed: Math.random() * 3 + 2,
                opacity: Math.random() * 0.5 + 0.5,
                angle: Math.random() * 2 * Math.PI,
                spin: (Math.random() - 0.5) * 0.2
            };
        }

        function drawConfetti() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let i = confettiParticles.length - 1; i >= 0; i--) {
                const p = confettiParticles[i];
                p.y += p.speed;
                p.angle += p.spin;
                if (p.y > canvas.height + 20) {
                    confettiParticles.splice(i, 1);
                }
            }
            while (confettiParticles.length < 200) {
                confettiParticles.push(createConfetti());
            }
            confettiParticles.forEach(p => {
                ctx.save();
                ctx.fillStyle = p.color;
                ctx.globalAlpha = p.opacity;
                ctx.translate(p.x, p.y);
                ctx.rotate(p.angle);
                ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size);
                ctx.restore();
            });
        }
    </script>
</body>
</html>
